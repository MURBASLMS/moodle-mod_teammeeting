define ("mod_teammeeting/lobby",["exports","core/ajax","core/notification","core/modal_factory","core/modal_events","core/str","core/templates"],function(a,b,c,d,e,f,g){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=h(b);c=h(c);d=h(d);e=h(e);g=h(g);function h(a){return a&&a.__esModule?a:{default:a}}var i=function(a){d.default.create({type:d.default.types.SAVE_CANCEL,title:(0,f.get_string)("sessionnotready","mod_teammeeting"),body:(0,f.get_strings)([{key:"sessionrequiresorganiserinstructions",component:"mod_teammeeting"},{key:"whatwouldyouliketodo",component:"mod_teammeeting"}]).then(function(a){return"<p>".concat(a[0],"</p><p>").concat(a[1],"</p>")})}).then(function(b){b.setButtonText("cancel",(0,f.get_string)("waitinstead","mod_teammeeting"));b.setButtonText("save",(0,f.get_string)("nominatemyself","mod_teammeeting"));b.getRoot().on(e.default.save,function(c){c.preventDefault();var d=b.getFooter().find(b.getActionSelector("save"));d.attr("disabled",!0);b.asyncSet(g.default.render("core/loading",{}),d.html.bind(d));j(a)});b.show()})},j=function(a){b.default.call([{methodname:"mod_teammeeting_nominate_organiser",args:{teammeetingid:a}}])[0].then(function(a){window.location.href=a.externalurl}).catch(c.default.exception)},k=function(a){var d=function(){b.default.call([{methodname:"mod_teammeeting_is_meeting_ready",args:{teammeetingid:a}}])[0].then(function(a){if(a.isready){window.location.href=a.externalurl;return}setTimeout(d,15000)}).catch(c.default.exception)};setTimeout(d,15000)};a.init=function init(a,b){if(b){i(a)}k(a)}});
//# sourceMappingURL=lobby.min.js.map
