define ("mod_teammeeting/lobby",["exports","core/ajax","core/notification","core/modal_factory","core/modal_events","core/str","core/templates"],function(a,b,c,d,e,f,g){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=h(b);c=h(c);d=h(d);e=h(e);g=h(g);function h(a){return a&&a.__esModule?a:{default:a}}var i=function(a,b){d.default.create({type:d.default.types.SAVE_CANCEL,title:(0,f.get_string)("sessionnotready","mod_teammeeting"),body:(0,f.get_strings)([{key:"sessionrequiresorganiserinstructions",component:"mod_teammeeting"},{key:"whatwouldyouliketodo",component:"mod_teammeeting"}]).then(function(a){return"<p>".concat(a[0],"</p><p>").concat(a[1],"</p>")})}).then(function(c){c.setButtonText("cancel",(0,f.get_string)("waitinstead","mod_teammeeting"));c.setButtonText("save",(0,f.get_string)("nominatemyself","mod_teammeeting"));c.getRoot().on(e.default.save,function(d){d.preventDefault();var e=c.getFooter().find(c.getActionSelector("save"));e.attr("disabled",!0);c.asyncSet(g.default.render("core/loading",{}),e.html.bind(e));j(a,b)});c.show()}).catch(c.default.exception)},j=function(a,d){b.default.call([{methodname:"mod_teammeeting_nominate_organiser",args:{teammeetingid:a,groupid:d}}])[0].then(function(a){window.location.href=a.externalurl}).catch(c.default.exception)},k=function(a,d){var e=function(){b.default.call([{methodname:"mod_teammeeting_is_meeting_ready",args:{teammeetingid:a,groupid:d}}])[0].then(function(a){if(a.isready){window.location.href=a.externalurl;return}setTimeout(e,15000)}).catch(c.default.exception)};setTimeout(e,15000)};a.init=function init(a,b,c){if(c){i(a,b)}k(a,b)}});
//# sourceMappingURL=lobby.min.js.map
